

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>littlebot_navigation &mdash; LittleBot 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fc7ddcec" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="littlebot_teleop" href="littlebot_teleop.html" />
    <link rel="prev" title="littlebot_localization" href="littlebot_localization.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980b9" >

          
          
          <a href="../index.html" class="icon icon-home">
            LittleBot
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Package Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#core-packages">Core Packages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#navigation-and-localization">Navigation and Localization</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="littlebot_localization.html">littlebot_localization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">littlebot_navigation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#components">Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#path-planning">Path Planning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#costmaps">Costmaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#behavior-trees">Behavior Trees</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recovery-behaviors">Recovery Behaviors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-features">Advanced Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-examples">Integration Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#user-interface">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#simulation">Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#meta-package">Meta Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="littlebot_base.html">littlebot_base</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_bringup.html">littlebot_bringup</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_control.html">littlebot_control</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_description.html">littlebot_description</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_localization.html">littlebot_localization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">littlebot_navigation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#components">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#navigation-stack">Navigation Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launch-files">Launch Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#starting-navigation">Starting Navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-navigation-goals">Setting Navigation Goals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#path-planning">Path Planning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-planning">Global Planning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-planning">Local Planning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#costmaps">Costmaps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-costmap">Global Costmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-costmap">Local Costmap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#behavior-trees">Behavior Trees</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#navigation-logic">Navigation Logic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#recovery-behaviors">Recovery Behaviors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-features">Advanced Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dynamic-obstacles">Dynamic Obstacles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-robot-navigation">Multi-Robot Navigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#navigation-monitoring">Navigation Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-issues">Common Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-optimization">Performance Optimization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#integration-examples">Integration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#complete-navigation-system">Complete Navigation System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulation-integration">Simulation Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_teleop.html">littlebot_teleop</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_gazebo.html">littlebot_gazebo</a></li>
<li class="toctree-l1"><a class="reference internal" href="littlebot_rqt_plugin.html">littlebot_rqt_plugin</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980b9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LittleBot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Package Documentation</a></li>
      <li class="breadcrumb-item active">littlebot_navigation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/NestorDP/littlebot/blob/main/docs/source/packages/littlebot_navigation.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="littlebot-navigation">
<h1>littlebot_navigation<a class="headerlink" href="#littlebot-navigation" title="Link to this heading"></a></h1>
<p>The <cite>littlebot_navigation</cite> package provides autonomous navigation capabilities using the ROS2 Navigation2 (Nav2) stack for path planning, obstacle avoidance, and goal execution.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This package implements:</p>
<ul class="simple">
<li><p>Global path planning for long-distance navigation</p></li>
<li><p>Local path planning for obstacle avoidance</p></li>
<li><p>Behavior trees for complex navigation behaviors</p></li>
<li><p>Recovery behaviors for error handling</p></li>
<li><p>Dynamic obstacle avoidance</p></li>
<li><p>Integration with localization and mapping systems</p></li>
</ul>
</section>
<section id="components">
<h2>Components<a class="headerlink" href="#components" title="Link to this heading"></a></h2>
<section id="navigation-stack">
<h3>Navigation Stack<a class="headerlink" href="#navigation-stack" title="Link to this heading"></a></h3>
<p><strong>Core Navigation Nodes</strong>:</p>
<ul class="simple">
<li><p><strong>Planner Server</strong>: Global path planning algorithms</p></li>
<li><p><strong>Controller Server</strong>: Local trajectory following</p></li>
<li><p><strong>Recoveries Server</strong>: Recovery behavior execution</p></li>
<li><p><strong>BT Navigator</strong>: Behavior tree-based navigation logic</p></li>
<li><p><strong>Waypoint Follower</strong>: Sequential waypoint navigation</p></li>
<li><p><strong>Lifecycle Manager</strong>: Node lifecycle coordination</p></li>
</ul>
<p><strong>Path Planning Algorithms</strong>:</p>
<ul class="simple">
<li><p><strong>NavFn Planner</strong>: Dijkstra-based global planner</p></li>
<li><p><strong>Smac Planner</strong>: State-space search planner</p></li>
<li><p><strong>TEB Local Planner</strong>: Timed Elastic Band local planner</p></li>
<li><p><strong>DWB Local Planner</strong>: Dynamic Window Approach planner</p></li>
</ul>
</section>
<section id="configuration-files">
<h3>Configuration Files<a class="headerlink" href="#configuration-files" title="Link to this heading"></a></h3>
<p><strong>Navigation Parameters</strong>: <cite>config/nav2_params.yaml</cite></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">bt_navigator</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map</span>
<span class="w">    </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">base_link</span>
<span class="w">    </span><span class="nt">odom_topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/odom</span>
<span class="w">    </span><span class="nt">bt_loop_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="nt">default_server_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">    </span><span class="nt">enable_groot_monitoring</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">groot_zmq_publisher_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1666</span>
<span class="w">    </span><span class="nt">groot_zmq_server_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1667</span>
<span class="w">    </span><span class="nt">default_nav_to_pose_bt_xml</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">default_nav_through_poses_bt_xml</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">publish_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map</span>
<span class="w">      </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">base_link</span>
<span class="w">      </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">      </span><span class="nt">track_unknown_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;static_layer&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;obstacle_layer&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;inflation_layer&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>Costmap Configuration</strong>: <cite>config/costmap_params.yaml</cite></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Static layer (map-based obstacles)</span>
<span class="nt">static_layer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_costmap_2d::StaticLayer&quot;</span>
<span class="w">  </span><span class="nt">map_subscribe_transient_local</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># Obstacle layer (sensor-based obstacles)</span>
<span class="nt">obstacle_layer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_costmap_2d::ObstacleLayer&quot;</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">observation_sources</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scan</span>
<span class="w">  </span><span class="nt">scan</span><span class="p">:</span>
<span class="w">    </span><span class="nt">topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/scan</span>
<span class="w">    </span><span class="nt">max_obstacle_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">clearing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">marking</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">data_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LaserScan&quot;</span>

<span class="c1"># Inflation layer (safety margins)</span>
<span class="nt">inflation_layer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_costmap_2d::InflationLayer&quot;</span>
<span class="w">  </span><span class="nt">cost_scaling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">  </span><span class="nt">inflation_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.55</span>
</pre></div>
</div>
</section>
<section id="launch-files">
<h3>Launch Files<a class="headerlink" href="#launch-files" title="Link to this heading"></a></h3>
<p><strong>Main Navigation Launch</strong>: <cite>launch/littlebot_navigation.launch.py</cite></p>
<p>Starts the complete Navigation2 stack:</p>
<ul class="simple">
<li><p>All navigation servers and nodes</p></li>
<li><p>Costmap configuration</p></li>
<li><p>Behavior tree setup</p></li>
<li><p>Recovery behaviors</p></li>
</ul>
<p><strong>Waypoint Navigation Launch</strong>: <cite>launch/waypoint_navigation.launch.py</cite></p>
<p>Specialized for waypoint following:</p>
<ul class="simple">
<li><p>Sequential waypoint execution</p></li>
<li><p>Custom behavior trees</p></li>
<li><p>Waypoint management interface</p></li>
</ul>
</section>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<section id="starting-navigation">
<h3>Starting Navigation<a class="headerlink" href="#starting-navigation" title="Link to this heading"></a></h3>
<p>Launch the navigation system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start with default configuration</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_navigation<span class="w"> </span>littlebot_navigation.launch.py

<span class="c1"># Start with custom parameters</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_navigation<span class="w"> </span>littlebot_navigation.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>params_file:<span class="o">=</span>/path/to/custom_params.yaml

<span class="c1"># Start with custom map</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_navigation<span class="w"> </span>littlebot_navigation.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>map:<span class="o">=</span>/path/to/your/map.yaml
</pre></div>
</div>
</section>
<section id="setting-navigation-goals">
<h3>Setting Navigation Goals<a class="headerlink" href="#setting-navigation-goals" title="Link to this heading"></a></h3>
<p><strong>Using Command Line</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Send a navigation goal</span>
ros2<span class="w"> </span>action<span class="w"> </span>send_goal<span class="w"> </span>/navigate_to_pose<span class="w"> </span>nav2_msgs/action/NavigateToPose<span class="w"> </span><span class="se">\</span>
<span class="s1">&#39;{</span>
<span class="s1">  pose: {</span>
<span class="s1">    header: {frame_id: &quot;map&quot;},</span>
<span class="s1">    pose: {</span>
<span class="s1">      position: {x: 2.0, y: 1.0, z: 0.0},</span>
<span class="s1">      orientation: {x: 0.0, y: 0.0, z: 0.0, w: 1.0}</span>
<span class="s1">    }</span>
<span class="s1">  }</span>
<span class="s1">}&#39;</span>

<span class="c1"># Follow waypoints</span>
ros2<span class="w"> </span>action<span class="w"> </span>send_goal<span class="w"> </span>/follow_waypoints<span class="w"> </span>nav2_msgs/action/FollowWaypoints<span class="w"> </span><span class="se">\</span>
<span class="s1">&#39;{</span>
<span class="s1">  poses: [</span>
<span class="s1">    {</span>
<span class="s1">      header: {frame_id: &quot;map&quot;},</span>
<span class="s1">      pose: {</span>
<span class="s1">        position: {x: 1.0, y: 0.0, z: 0.0},</span>
<span class="s1">        orientation: {w: 1.0}</span>
<span class="s1">      }</span>
<span class="s1">    },</span>
<span class="s1">    {</span>
<span class="s1">      header: {frame_id: &quot;map&quot;},</span>
<span class="s1">      pose: {</span>
<span class="s1">        position: {x: 2.0, y: 1.0, z: 0.0},</span>
<span class="s1">        orientation: {w: 1.0}</span>
<span class="s1">      }</span>
<span class="s1">    }</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p><strong>Using RViz</strong>:</p>
<ol class="arabic simple">
<li><p>Open RViz with navigation configuration</p></li>
<li><p>Click “2D Nav Goal” button</p></li>
<li><p>Click and drag on the map to set goal pose</p></li>
</ol>
<p><strong>Programmatic Interface</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">rclpy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nav2_simple_commander.robot_navigator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasicNavigator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">geometry_msgs.msg</span><span class="w"> </span><span class="kn">import</span> <span class="n">PoseStamped</span>

<span class="k">def</span><span class="w"> </span><span class="nf">navigate_to_goal</span><span class="p">():</span>
    <span class="n">navigator</span> <span class="o">=</span> <span class="n">BasicNavigator</span><span class="p">()</span>

    <span class="c1"># Set initial pose</span>
    <span class="n">initial_pose</span> <span class="o">=</span> <span class="n">PoseStamped</span><span class="p">()</span>
    <span class="n">initial_pose</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s1">&#39;map&#39;</span>
    <span class="n">initial_pose</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">navigator</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">to_msg</span><span class="p">()</span>
    <span class="n">initial_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">initial_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">initial_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">navigator</span><span class="o">.</span><span class="n">setInitialPose</span><span class="p">(</span><span class="n">initial_pose</span><span class="p">)</span>

    <span class="c1"># Navigate to goal</span>
    <span class="n">goal_pose</span> <span class="o">=</span> <span class="n">PoseStamped</span><span class="p">()</span>
    <span class="n">goal_pose</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s1">&#39;map&#39;</span>
    <span class="n">goal_pose</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">navigator</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">to_msg</span><span class="p">()</span>
    <span class="n">goal_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">2.0</span>
    <span class="n">goal_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">goal_pose</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">navigator</span><span class="o">.</span><span class="n">goToPose</span><span class="p">(</span><span class="n">goal_pose</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="path-planning">
<h2>Path Planning<a class="headerlink" href="#path-planning" title="Link to this heading"></a></h2>
<section id="global-planning">
<h3>Global Planning<a class="headerlink" href="#global-planning" title="Link to this heading"></a></h3>
<p><strong>NavFn Planner Configuration</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">planner_server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">expected_planner_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">    </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">planner_plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;GridBased&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">GridBased</span><span class="p">:</span>
<span class="w">      </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_navfn_planner/NavfnPlanner&quot;</span>
<span class="w">      </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">      </span><span class="nt">use_astar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">allow_unknown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p><strong>Smac Planner Configuration</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">GridBased</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_smac_planner/SmacPlannerHybrid&quot;</span>
<span class="w">  </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">  </span><span class="nt">downsample_costmap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">downsampling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">allow_unknown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">max_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<span class="w">  </span><span class="nt">max_on_approach_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="nt">max_planning_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.5</span>
<span class="w">  </span><span class="nt">motion_model_for_search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;DUBIN&quot;</span>
<span class="w">  </span><span class="nt">cost_travel_multiplier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
</pre></div>
</div>
</section>
<section id="local-planning">
<h3>Local Planning<a class="headerlink" href="#local-planning" title="Link to this heading"></a></h3>
<p><strong>DWB Local Planner</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controller_server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">controller_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">    </span><span class="nt">min_x_velocity_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">min_y_velocity_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">min_theta_velocity_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">    </span><span class="nt">controller_plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;FollowPath&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">FollowPath</span><span class="p">:</span>
<span class="w">      </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dwb_core::DWBLocalPlanner&quot;</span>
<span class="w">      </span><span class="nt">debug_trajectory_details</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">min_vel_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">min_vel_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">max_vel_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.26</span>
<span class="w">      </span><span class="nt">max_vel_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">max_vel_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">min_speed_xy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">max_speed_xy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.26</span>
<span class="w">      </span><span class="nt">min_speed_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">acc_lim_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.5</span>
<span class="w">      </span><span class="nt">acc_lim_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">acc_lim_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.2</span>
<span class="w">      </span><span class="nt">decel_lim_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-2.5</span>
<span class="w">      </span><span class="nt">decel_lim_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">      </span><span class="nt">decel_lim_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-3.2</span>
</pre></div>
</div>
<p><strong>TEB Local Planner</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">FollowPath</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;teb_local_planner::TebLocalPlannerROS&quot;</span>
<span class="w">  </span><span class="nt">teb_autosize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">dt_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="w">  </span><span class="nt">dt_hysteresis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">  </span><span class="nt">max_samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="nt">global_plan_overwrite_orientation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">allow_init_with_backwards_motion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">max_global_plan_lookahead_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">  </span><span class="nt">global_plan_viapoint_sep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">  </span><span class="nt">global_plan_prune_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">exact_arc_length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">feasibility_check_no_poses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
</section>
</section>
<section id="costmaps">
<h2>Costmaps<a class="headerlink" href="#costmaps" title="Link to this heading"></a></h2>
<section id="global-costmap">
<h3>Global Costmap<a class="headerlink" href="#global-costmap" title="Link to this heading"></a></h3>
<p>Long-range planning costmap:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">publish_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">map</span>
<span class="w">      </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">base_link</span>
<span class="w">      </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">robot_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">      </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">      </span><span class="nt">track_unknown_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;static_layer&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;obstacle_layer&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;inflation_layer&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">always_send_full_costmap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
<section id="local-costmap">
<h3>Local Costmap<a class="headerlink" href="#local-costmap" title="Link to this heading"></a></h3>
<p>Short-range obstacle avoidance costmap:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">local_costmap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">local_costmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">      </span><span class="nt">publish_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">      </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">odom</span>
<span class="w">      </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">base_link</span>
<span class="w">      </span><span class="nt">use_sim_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">rolling_window</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">      </span><span class="nt">robot_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">      </span><span class="nt">plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;voxel_layer&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;inflation_layer&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
</section>
<section id="behavior-trees">
<h2>Behavior Trees<a class="headerlink" href="#behavior-trees" title="Link to this heading"></a></h2>
<section id="navigation-logic">
<h3>Navigation Logic<a class="headerlink" href="#navigation-logic" title="Link to this heading"></a></h3>
<p><strong>Default Behavior Tree</strong>:</p>
<p>The navigation system uses behavior trees for decision making:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;root</span><span class="w"> </span><span class="na">main_tree_to_execute=</span><span class="s">&quot;MainTree&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;BehaviorTree</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;MainTree&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;RecoveryNode</span><span class="w"> </span><span class="na">number_of_retries=</span><span class="s">&quot;6&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;NavigateRecovery&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;PipelineSequence</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;NavigateWithReplanning&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;RateController</span><span class="w"> </span><span class="na">hz=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;RecoveryNode</span><span class="w"> </span><span class="na">number_of_retries=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ComputePathToPose&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ComputePathToPose</span><span class="w"> </span><span class="na">goal=</span><span class="s">&quot;{goal}&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;{path}&quot;</span><span class="w"> </span><span class="na">planner_id=</span><span class="s">&quot;GridBased&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;ReactiveFallback</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ComputePathToPoseRecovery&quot;</span><span class="nt">&gt;</span>
<span class="w">              </span><span class="nt">&lt;GoalUpdated/&gt;</span>
<span class="w">              </span><span class="nt">&lt;ClearEntireCostmap</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearGlobalCostmap-Context&quot;</span><span class="w"> </span><span class="na">service_name=</span><span class="s">&quot;global_costmap/clear_entirely_global_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/ReactiveFallback&gt;</span>
<span class="w">          </span><span class="nt">&lt;/RecoveryNode&gt;</span>
<span class="w">        </span><span class="nt">&lt;/RateController&gt;</span>
<span class="w">        </span><span class="nt">&lt;RecoveryNode</span><span class="w"> </span><span class="na">number_of_retries=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;FollowPath&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;FollowPath</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;{path}&quot;</span><span class="w"> </span><span class="na">controller_id=</span><span class="s">&quot;FollowPath&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;ReactiveFallback</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;FollowPathRecovery&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;GoalUpdated/&gt;</span>
<span class="w">            </span><span class="nt">&lt;ClearEntireCostmap</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearLocalCostmap-Context&quot;</span><span class="w"> </span><span class="na">service_name=</span><span class="s">&quot;local_costmap/clear_entirely_local_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;/ReactiveFallback&gt;</span>
<span class="w">        </span><span class="nt">&lt;/RecoveryNode&gt;</span>
<span class="w">      </span><span class="nt">&lt;/PipelineSequence&gt;</span>
<span class="w">      </span><span class="nt">&lt;ReactiveFallback</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;RecoveryFallback&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;GoalUpdated/&gt;</span>
<span class="w">        </span><span class="nt">&lt;RoundRobin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;RecoveryActions&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;Sequence</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearingActions&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ClearEntireCostmap</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearLocalCostmap-Subtree&quot;</span><span class="w"> </span><span class="na">service_name=</span><span class="s">&quot;local_costmap/clear_entirely_local_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;ClearEntireCostmap</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearGlobalCostmap-Subtree&quot;</span><span class="w"> </span><span class="na">service_name=</span><span class="s">&quot;global_costmap/clear_entirely_global_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;/Sequence&gt;</span>
<span class="w">          </span><span class="nt">&lt;Spin</span><span class="w"> </span><span class="na">spin_dist=</span><span class="s">&quot;1.57&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;Wait</span><span class="w"> </span><span class="na">wait_duration=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;BackUp</span><span class="w"> </span><span class="na">backup_dist=</span><span class="s">&quot;0.15&quot;</span><span class="w"> </span><span class="na">backup_speed=</span><span class="s">&quot;0.025&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/RoundRobin&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ReactiveFallback&gt;</span>
<span class="w">    </span><span class="nt">&lt;/RecoveryNode&gt;</span>
<span class="w">  </span><span class="nt">&lt;/BehaviorTree&gt;</span>
<span class="nt">&lt;/root&gt;</span>
</pre></div>
</div>
<p><strong>Custom Behavior Trees</strong>:</p>
<p>Create custom navigation behaviors:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;BehaviorTree</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;FollowWaypoints&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;RecoveryNode</span><span class="w"> </span><span class="na">number_of_retries=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;FollowWaypoints&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;FollowWaypoints</span><span class="w"> </span><span class="na">waypoints=</span><span class="s">&quot;{waypoints}&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;ReactiveFallback</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;FollowWaypointsRecovery&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;GoalUpdated/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ClearEntireCostmap</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ClearLocalCostmap&quot;</span><span class="w"> </span><span class="na">service_name=</span><span class="s">&quot;local_costmap/clear_entirely_local_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ReactiveFallback&gt;</span>
<span class="w">  </span><span class="nt">&lt;/RecoveryNode&gt;</span>
<span class="nt">&lt;/BehaviorTree&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="recovery-behaviors">
<h2>Recovery Behaviors<a class="headerlink" href="#recovery-behaviors" title="Link to this heading"></a></h2>
<section id="error-handling">
<h3>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading"></a></h3>
<p><strong>Available Recovery Actions</strong>:</p>
<ul class="simple">
<li><p><strong>ClearCostmap</strong>: Clear obstacle information</p></li>
<li><p><strong>Spin</strong>: Rotate in place to clear sensor data</p></li>
<li><p><strong>BackUp</strong>: Move backwards to escape tight spaces</p></li>
<li><p><strong>Wait</strong>: Pause navigation temporarily</p></li>
</ul>
<p><strong>Recovery Configuration</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">recoveries_server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">costmap_topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local_costmap/costmap_raw</span>
<span class="w">    </span><span class="nt">footprint_topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local_costmap/published_footprint</span>
<span class="w">    </span><span class="nt">cycle_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">    </span><span class="nt">recovery_plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;spin&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;backup&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;wait&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">spin</span><span class="p">:</span>
<span class="w">      </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_recoveries/Spin&quot;</span>
<span class="w">      </span><span class="nt">simulate_ahead_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">      </span><span class="nt">max_rotational_vel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">min_rotational_vel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">      </span><span class="nt">rotational_acc_lim</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.2</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-features">
<h2>Advanced Features<a class="headerlink" href="#advanced-features" title="Link to this heading"></a></h2>
<section id="dynamic-obstacles">
<h3>Dynamic Obstacles<a class="headerlink" href="#dynamic-obstacles" title="Link to this heading"></a></h3>
<p>Real-time obstacle detection and avoidance:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable dynamic obstacle layer</span>
<span class="nt">obstacle_layer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav2_costmap_2d::ObstacleLayer&quot;</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">observation_sources</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scan</span>
<span class="w">  </span><span class="nt">scan</span><span class="p">:</span>
<span class="w">    </span><span class="nt">topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/scan</span>
<span class="w">    </span><span class="nt">max_obstacle_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">clearing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">marking</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">data_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LaserScan&quot;</span>
<span class="w">    </span><span class="nt">raytrace_max_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">    </span><span class="nt">raytrace_min_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">    </span><span class="nt">obstacle_max_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.5</span>
<span class="w">    </span><span class="nt">obstacle_min_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
</pre></div>
</div>
</section>
<section id="multi-robot-navigation">
<h3>Multi-Robot Navigation<a class="headerlink" href="#multi-robot-navigation" title="Link to this heading"></a></h3>
<p>Support for multiple robots:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Robot-specific namespaces</span>
<span class="nt">bt_navigator</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/robot1/map</span>
<span class="w">    </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/robot1/base_link</span>
<span class="w">    </span><span class="nt">odom_topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/robot1/odom</span>
</pre></div>
</div>
</section>
<section id="navigation-monitoring">
<h3>Navigation Monitoring<a class="headerlink" href="#navigation-monitoring" title="Link to this heading"></a></h3>
<p>Monitor navigation performance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check navigation status</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/navigate_to_pose/_action/status

<span class="c1"># Monitor path execution</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/plan
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/local_plan

<span class="c1"># Check costmap data</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/global_costmap/costmap
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="common-issues">
<h3>Common Issues<a class="headerlink" href="#common-issues" title="Link to this heading"></a></h3>
<p><strong>Path Planning Failures</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check costmap for obstacles</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/global_costmap/costmap

<span class="c1"># Verify map data</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/map

<span class="c1"># Check planner configuration</span>
ros2<span class="w"> </span>param<span class="w"> </span>list<span class="w"> </span>/planner_server
</pre></div>
</div>
<p><strong>Controller Issues</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Monitor controller commands</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/cmd_vel

<span class="c1"># Check local costmap</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/local_costmap/costmap

<span class="c1"># Verify robot footprint</span>
ros2<span class="w"> </span>param<span class="w"> </span>get<span class="w"> </span>/local_costmap/local_costmap<span class="w"> </span>robot_radius
</pre></div>
</div>
<p><strong>Recovery Behavior Problems</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check recovery server status</span>
ros2<span class="w"> </span>node<span class="w"> </span>info<span class="w"> </span>/recoveries_server

<span class="c1"># Monitor recovery actions</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/spin/_action/feedback
</pre></div>
</div>
</section>
<section id="performance-optimization">
<h3>Performance Optimization<a class="headerlink" href="#performance-optimization" title="Link to this heading"></a></h3>
<p><strong>Computational Efficiency</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reduce costmap update frequencies</span>
<span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">global_costmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Reduce from 1.0</span>
<span class="w">      </span><span class="nt">publish_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="c1"># Optimize planner settings</span>
<span class="nt">planner_server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">expected_planner_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span><span class="w">  </span><span class="c1"># Reduce from 20.0</span>
</pre></div>
</div>
<p><strong>Memory Usage</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reduce costmap size</span>
<span class="nt">local_costmap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">local_costmap</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">      </span><span class="nt">width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">  </span><span class="c1"># Reduce from 3</span>
<span class="w">      </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
</section>
</section>
<section id="integration-examples">
<h2>Integration Examples<a class="headerlink" href="#integration-examples" title="Link to this heading"></a></h2>
<section id="complete-navigation-system">
<h3>Complete Navigation System<a class="headerlink" href="#complete-navigation-system" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start complete system</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_bringup<span class="w"> </span>littlebot_bringup.launch.py<span class="w"> </span><span class="p">&amp;</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_localization<span class="w"> </span>littlebot_localization.launch.py<span class="w"> </span><span class="p">&amp;</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_navigation<span class="w"> </span>littlebot_navigation.launch.py
</pre></div>
</div>
</section>
<section id="simulation-integration">
<h3>Simulation Integration<a class="headerlink" href="#simulation-integration" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start Gazebo simulation</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_gazebo<span class="w"> </span>littlebot_gazebo_classic.launch.py<span class="w"> </span><span class="p">&amp;</span>

<span class="c1"># Start navigation in simulation</span>
ros2<span class="w"> </span>launch<span class="w"> </span>littlebot_navigation<span class="w"> </span>littlebot_navigation.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>use_sim_time:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<p><strong>ROS2 Packages</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_bringup</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_planner</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_controller</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_recoveries</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_bt_navigator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_waypoint_follower</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nav2_lifecycle_manager</span></code></p></li>
</ul>
<p><strong>System Dependencies</strong>:</p>
<ul class="simple">
<li><p>Laser scanner driver</p></li>
<li><p>Localization system</p></li>
<li><p>Map data</p></li>
</ul>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading"></a></h2>
<p>For detailed API documentation, see the Navigation2 official documentation and behavior tree guides.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="littlebot_localization.html" class="btn btn-neutral float-left" title="littlebot_localization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="littlebot_teleop.html" class="btn btn-neutral float-right" title="littlebot_teleop" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Nestor Neto.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>